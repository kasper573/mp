services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    image: ghcr.io/kasper573/mp-app:latest
    restart: always
    environment:
      MP_SERVER_URL: ws://k573.dev:4000
      MP_WS_PORT: 4000
      MP_HTTP_PORT: 80
      MP_HTTP_PUBLIC_HOSTNAME: "k573.dev"
      MP_HTTP_LISTEN_HOSTNAME: "0.0.0.0"
      MP_HTTP_CORS_ORIGIN: "*"
      MP_TICK_INTERVAL: 16
      MP_CLIENT_DIST_PATH: ../client/dist
  proxy:
    image: "jc21/nginx-proxy-manager:2.11.3"
    restart: unless-stopped
    ports:
      - "80:80"
      - "81:81"
      - "443:443"
    environment:
      DB_SQLITE_FILE: "/data/database.sqlite"
      DISABLE_IPV6: "true"
    volumes:
      - proxy-data:/data
      - letsencrypt-data:/etc/letsencrypt
volumes:
  proxy-data:
  letsencrypt-data:
